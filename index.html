<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DICE CLASH: ELITE</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --accent: #0088cc;
            --gold: #ffd700;
            --bg-dark: #0a0a0a;
            --text-light: rgba(255, 255, 255, 0.7);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            background: radial-gradient(circle at top right, #1a1a1a, #000);
            color: white;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            overscroll-behavior: none;
        }

        .header {
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .user-info b { font-size: 1.2em; letter-spacing: -0.5px; }

        /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü */
        .content {
            flex: 1;
            overflow-y: auto;
            padding: 0 15px 100px; /* –û—Ç—Å—Ç—É–ø –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ */
            scroll-behavior: smooth;
        }

        .page { display: none; }
        .page.active { display: block; animation: fadeIn 0.4s ease; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* –°—Ç–µ–∫–ª—è–Ω–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ */
        .glass-card {
            background: var(--glass-bg);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 20px;
            margin-bottom: 15px;
            transition: transform 0.2s;
        }

        /* –ò–≥—Ä–æ–≤–∞—è —Å—Ü–µ–Ω–∞ */
        .game-stage {
            height: 180px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
        }

        .game-display {
            font-size: 70px;
            position: relative;
            z-index: 2;
            transition: transform 0.2s ease-out; /* –î–ª—è –ø–ª–∞–≤–Ω–æ—Å—Ç–∏ */
        }

        .result-text {
            position: absolute;
            font-size: 36px;
            font-weight: 800;
            opacity: 0;
            transform: translateY(20px);
            z-index: 3;
            pointer-events: none;
            text-shadow: 0 0 15px rgba(0,0,0,0.8);
        }
        .result-text.show {
            animation: showResult 0.8s ease-out forwards;
        }
        @keyframes showResult {
            0% { opacity: 0; transform: translateY(20px) scale(0.8); }
            30% { opacity: 1; transform: translateY(0px) scale(1.1); }
            100% { opacity: 0; transform: translateY(-30px) scale(0.8); }
        }


        /* –ê–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ */
        .dice-anim { animation: diceRoll 0.8s cubic-bezier(0.2, 0.8, 0.5, 1.2) forwards; }
        @keyframes diceRoll {
            0% { transform: translateY(0) rotateY(0deg); opacity: 1; }
            40% { transform: translateY(-60px) rotateY(180deg) scale(1.1); opacity: 1; }
            70% { transform: translateY(10px) rotateY(360deg) scale(0.9); opacity: 1; }
            100% { transform: translateY(0) rotateY(360deg) scale(1); opacity: 1; }
        }

        .ball-anim { animation: ballBounce 0.8s cubic-bezier(0.2, 0.8, 0.5, 1.2) forwards; }
        @keyframes ballBounce {
            0% { transform: translateY(100px) scale(0.8) rotate(0deg); opacity: 0; }
            30% { transform: translateY(-20px) scale(1.1) rotate(180deg); opacity: 1; }
            70% { transform: translateY(5px) scale(0.95) rotate(360deg); opacity: 1; }
            100% { transform: translateY(0) scale(1) rotate(360deg); opacity: 1; }
        }

        .slot-reel {
            display: inline-block;
            font-size: 60px;
            width: 70px;
            height: 70px;
            overflow: hidden;
            vertical-align: middle;
        }
        .slot-reel span {
            display: block;
            line-height: 70px;
            text-align: center;
            transition: transform 0.2s ease-out; /* –û—Ç–¥–µ–ª—å–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –¥–ª—è —Å–º–µ–Ω—ã —Å–∏–º–≤–æ–ª–æ–≤ */
        }
        .slot-spinning .slot-reel span {
            animation: spinReel 0.1s steps(1) infinite;
        }
        @keyframes spinReel {
            0% { transform: translateY(0); }
            100% { transform: translateY(-70px); } /* –û–¥–∏–Ω —à–∞–≥ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ */
        }
        /* –ê–Ω–∏–º–∞—Ü–∏–∏ –∑–∞–º–µ–¥–ª–µ–Ω–∏—è –¥–ª—è —Å–ª–æ—Ç–æ–≤ –±—É–¥—É—Ç –≤ JS */


        /* –†–µ–∂–∏–º—ã –∏–≥—Ä—ã (–∫–∞—Ä—Ç–æ—á–∫–∏) */
        .games-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-top: 10px;
        }

        .game-item {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 18px;
            text-align: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .game-item.active {
            border-color: var(--accent);
            background: rgba(0, 136, 204, 0.15);
            box-shadow: 0 0 15px rgba(0,136,204,0.3);
        }
        .game-item:active { transform: scale(0.92); }

        .game-icon { font-size: 40px; margin-bottom: 8px; display: block; }
        .game-label { font-size: 13px; font-weight: 600; opacity: 0.9; letter-spacing: 0.5px; }

        /* –ü—Ä–æ—Ñ–∏–ª—å */
        .profile-section-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--text-light);
        }
        .stat-row { display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 14px; }
        .progress-bar {
            height: 8px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            overflow: hidden;
            margin-top: 5px;
        }
        .progress-fill { height: 100%; background: linear-gradient(90deg, #0088cc, #00d4ff); width: 60%; transition: width 1s ease-out; }

        /* –ó–∞–¥–∞–Ω–∏—è */
        .task-item {
            background: rgba(255,255,255,0.03);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            font-size: 14px;
        }
        .task-item .icon { font-size: 24px; margin-right: 10px; }
        .task-item .details { flex-grow: 1; }
        .task-item .reward { font-weight: 700; color: var(--gold); }
        .task-item .progress-bar { height: 4px; background: rgba(255,255,255,0.1); border-radius: 2px; margin-top: 5px; }
        .task-item .progress-fill { background: var(--accent); width: 70%; height: 100%; border-radius: 2px; }

        /* –†–µ–∫–ª–∞–º–Ω—ã–π –±–∞–Ω–Ω–µ—Ä */
        .ad-banner {
            background: linear-gradient(45deg, #1f1f1f, #2a2a2a);
            border-radius: 20px;
            padding: 15px;
            text-align: center;
            margin-top: 20px;
            font-size: 14px;
            color: var(--text-light);
            cursor: pointer;
            transition: transform 0.2s ease-out;
        }
        .ad-banner:active { transform: scale(0.95); }
        .ad-banner strong { color: var(--gold); }


        /* –ì–ª–∞–≤–Ω–∞—è –∫–Ω–æ–ø–∫–∞ */
        .btn-main {
            background: white;
            color: black;
            border: none;
            padding: 18px;
            border-radius: 20px;
            font-weight: 800;
            width: 100%;
            margin-top: 20px;
            font-size: 16px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
            transition: transform 0.2s ease-out, box-shadow 0.2s ease-out;
        }
        .btn-main:active { transform: scale(0.95); box-shadow: 0 4px 10px rgba(0,0,0,0.2); }

        /* –ù–∏–∂–Ω–µ–µ –º–µ–Ω—é */
        .nav-bar {
            position: fixed;
            bottom: 20px;
            left: 20px;
            right: 20px;
            background: rgba(20, 20, 20, 0.8);
            backdrop-filter: blur(20px);
            border-radius: 30px;
            display: flex;
            padding: 6px;
            border: 1px solid var(--glass-border);
            z-index: 100;
        }

        .nav-btn {
            flex: 1;
            text-align: center;
            padding: 14px;
            font-size: 24px;
            opacity: 0.4;
            transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .nav-btn.active { opacity: 1; color: var(--accent); transform: translateY(-2px); }
    </style>
</head>
<body>

    <div class="header">
        <div class="user-info">
            <span style="opacity: 0.5; font-size: 12px; display: block;">–≠–ª–∏—Ç–∞,</span>
            <b><span id="u_name">–ò–≥—Ä–æ–∫</span></b>
        </div>
        <div class="glass-card" style="margin:0; padding: 10px 18px; border-radius: 18px;">
            <b id="balance_val" style="color: var(--gold);">1,250</b> üíé
        </div>
    </div>

    <div class="content">
        <div id="home-page" class="page active">
            <div class="game-stage glass-card" style="padding-bottom: 0;">
                <div id="game-display" class="game-display">üé∞</div>
                <div id="result-message" class="result-text"></div>
            </div>

            <div class="games-grid">
                <div class="game-item active" onclick="setGameMode('üé∞', 'SLOT', this)">
                    <span class="game-icon">üé∞</span>
                    <span class="game-label">–°–ª–æ—Ç—ã</span>
                </div>
                <div class="game-item" onclick="setGameMode('üé≤', 'DICE', this)">
                    <span class="game-icon">üé≤</span>
                    <span class="game-label">–ö—É–±</span>
                </div>
                <div class="game-item" onclick="setGameMode('‚öΩ', 'FOOTBALL', this)">
                    <span class="game-icon">‚öΩ</span>
                    <span class="game-label">–§—É—Ç–±–æ–ª</span>
                </div>
                <div class="game-item" onclick="setGameMode('üèÄ', 'BASKET', this)">
                    <span class="game-icon">üèÄ</span>
                    <span class="game-label">–ë–∞—Å–∫–µ—Ç</span>
                </div>
            </div>

            <button class="btn-main" onclick="playGame()">–ü–û–ü–´–¢–ê–¢–¨ –£–î–ê–ß–£ (10 üíé)</button>

            <div class="ad-banner" onclick="tg.openLink('https://adsgram.ai/')" style="margin-bottom: 100px;">
                –†–µ–∫–ª–∞–º–∞: <strong>–°–º–æ—Ç—Ä–∏ –≤–∏–¥–µ–æ</strong> –∏ –ø–æ–ª—É—á–∞–π üíé
            </div>
        </div>

        <div id="profile-page" class="page">
            <div class="glass-card">
                <h3 class="profile-section-title">–¢–≤–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å</h3>
                <div class="stat-row">
                    <span>–£—Ä–æ–≤–µ–Ω—å: <b>5</b></span>
                    <span>–†–∞–Ω–≥: <b style="color: var(--accent);">–ó–æ–ª–æ—Ç–æ</b></span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill"></div>
                </div>
                <p style="font-size: 12px; opacity: 0.7; margin-top: 8px;">–î–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–≤–Ω—è: 250 XP</p>
            </div>

            <div class="glass-card" style="margin-top: 15px;">
                <h3 class="profile-section-title">–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è</h3>
                <div class="task-item">
                    <span class="icon">üéØ</span>
                    <div class="details">
                        <b>–°—ã–≥—Ä–∞–π 5 —Ä–∞–∑</b><br>
                        <span style="font-size:12px; opacity:0.6;">4/5 –≤—ã–ø–æ–ª–Ω–µ–Ω–æ</span>
                        <div class="progress-bar" style="margin-top:3px;"><div class="progress-fill" style="width:80%;"></div></div>
                    </div>
                    <span class="reward">+20 üíé</span>
                </div>
                <div class="task-item">
                    <span class="icon">üì∫</span>
                    <div class="details">
                        <b>–ü–æ—Å–º–æ—Ç—Ä–∏ 3 —Ä–µ–∫–ª–∞–º—ã</b><br>
                        <span style="font-size:12px; opacity:0.6;">1/3 –≤—ã–ø–æ–ª–Ω–µ–Ω–æ</span>
                        <div class="progress-bar" style="margin-top:3px;"><div class="progress-fill" style="width:33%;"></div></div>
                    </div>
                    <span class="reward">+50 üíé</span>
                </div>
            </div>
        </div>
    </div>

    <nav class="nav-bar">
        <div class="nav-btn active" onclick="switchTab('home-page', this)">üéÆ</div>
        <div class="nav-btn" onclick="switchTab('profile-page', this)">üë§</div>
    </nav>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();

        let currentMode = 'SLOT';
        let isGameBusy = false; // –§–ª–∞–≥, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —Å–ø–∞–º–∞ –Ω–∞–∂–∞—Ç–∏–π

        const gameDisplay = document.getElementById('game-display');
        const resultMessage = document.getElementById('result-message');
        const balanceVal = document.getElementById('balance_val');
        let userBalance = 1250; // –ù–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å

        document.getElementById('u_name').innerText = tg.initDataUnsafe.user?.first_name || "–ò–≥—Ä–æ–∫";

        function updateBalance(amount) {
            userBalance += amount;
            balanceVal.innerText = userBalance.toLocaleString();
        }

        function switchTab(pageId, element) {
            if (isGameBusy) return;
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');

            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            element.classList.add('active');
            tg.HapticFeedback.impactOccurred('light');
        }

        function setGameMode(emoji, modeType, element) {
            if (isGameBusy) return;
            currentMode = modeType;
            gameDisplay.innerText = emoji;

            document.querySelectorAll('.game-item').forEach(item => item.classList.remove('active'));
            element.classList.add('active');
            tg.HapticFeedback.selectionChanged();
        }

        function showResult(isWin, winAmount) {
            resultMessage.classList.remove('show'); // –°–±—Ä–æ—Å –∞–Ω–∏–º–∞—Ü–∏–∏
            void resultMessage.offsetWidth; // –¢—Ä–∏–≥–≥–µ—Ä —Ä–µ—Ñ–ª–æ—É –¥–ª—è —Å–±—Ä–æ—Å–∞

            if (isWin) {
                resultMessage.innerText = `–ü–û–ë–ï–î–ê! +${winAmount} üíé`;
                resultMessage.style.color = var('--gold');
                tg.HapticFeedback.notificationOccurred('success');
            } else {
                resultMessage.innerText = `–ü–†–û–ò–ì–†–´–®`;
                resultMessage.style.color = '#ff4d4d'; // –ö—Ä–∞—Å–Ω—ã–π –¥–ª—è –ø—Ä–æ–∏–≥—Ä—ã—à–∞
                tg.HapticFeedback.notificationOccurred('error');
            }
            resultMessage.classList.add('show');
            
            // –°–∫—Ä—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏
            setTimeout(() => {
                resultMessage.classList.remove('show');
            }, 1200);
        }

        function playGame() {
            if (isGameBusy || userBalance < 10) {
                tg.HapticFeedback.notificationOccurred('error');
                tg.showAlert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ üíé –∏–ª–∏ –∏–≥—Ä–∞ —É–∂–µ –∏–¥–µ—Ç!');
                return;
            }

            isGameBusy = true;
            updateBalance(-10); // –°–Ω–∏–º–∞–µ–º —Å—Ç–∞–≤–∫—É

            gameDisplay.classList.remove('dice-anim', 'ball-anim'); // –°–±—Ä–æ—Å –ø—Ä–æ—à–ª—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π
            resultMessage.classList.remove('show'); // –°–∫—Ä—ã–≤–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

            tg.HapticFeedback.impactOccurred('heavy'); // –ú–æ—â–Ω–∞—è –≤–∏–±—Ä–∞—Ü–∏—è –≤ –Ω–∞—á–∞–ª–µ

            let finalResultEmoji = '';
            let isWin = false;
            let winAmount = 0;
            const winChance = 0.35; // –®–∞–Ω—Å –ø–æ–±–µ–¥—ã (–º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å)

            if (currentMode === 'DICE') {
                gameDisplay.classList.add('dice-anim');
                const diceFaces = ['1Ô∏è‚É£', '2Ô∏è‚É£', '3Ô∏è‚É£', '4Ô∏è‚É£', '5Ô∏è‚É£', '6Ô∏è‚É£'];
                setTimeout(() => {
                    const roll = Math.floor(Math.random() * 6) + 1;
                    finalResultEmoji = diceFaces[roll - 1];
                    gameDisplay.innerText = finalResultEmoji;

                    isWin = (roll >= 4 && Math.random() < winChance); // –®–∞–Ω—Å –≤—ã–∏–≥—Ä–∞—Ç—å –±–æ–ª—å—à–µ –Ω–∞ –±–æ–ª—å—à–∏—Ö —á–∏—Å–ª–∞—Ö
                    winAmount = isWin ? (roll * 5) : 0; // –í—ã–∏–≥—Ä—ã—à –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —á–∏—Å–ª–∞

                    showResult(isWin, winAmount);
                    if (isWin) updateBalance(winAmount);
                    isGameBusy = false;
                }, 800);

            } else if (currentMode === 'FOOTBALL' || currentMode === 'BASKET') {
                gameDisplay.classList.add('ball-anim');
                setTimeout(() => {
                    isWin = Math.random() < winChance;
                    finalResultEmoji = isWin ? '‚úÖ' : '‚ùå';
                    gameDisplay.innerText = finalResultEmoji;

                    winAmount = isWin ? 30 : 0;

                    showResult(isWin, winAmount);
                    if (isWin) updateBalance(winAmount);
                    isGameBusy = false;
                }, 800);

            } else if (currentMode === 'SLOT') {
                const slotItems = ['üçí', 'üçã', 'üíé', '7Ô∏è‚É£'];
                const reels = [gameDisplay, gameDisplay, gameDisplay]; // –ò—Å–ø–æ–ª—å–∑—É–µ–º –æ–¥–∏–Ω —ç–ª–µ–º–µ–Ω—Ç –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã
                
                let reelValues = ['', '', '']; // –î–ª—è –∫–∞–∂–¥–æ–≥–æ –±–∞—Ä–∞–±–∞–Ω–∞
                let spinTime = [800, 1000, 1200]; // –†–∞–∑–Ω–æ–µ –≤—Ä–µ–º—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∞

                function spinSingleReel(reelIndex) {
                    let spinInterval = setInterval(() => {
                        reelValues[reelIndex] = slotItems[Math.floor(Math.random() * slotItems.length)];
                        gameDisplay.innerText = reelValues.join(''); // –û–±–Ω–æ–≤–ª—è–µ–º –≤–µ—Å—å —Å–ª–æ—Ç
                    }, 50); // –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞

                    setTimeout(() => {
                        clearInterval(spinInterval);
                        // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è —ç—Ç–æ–≥–æ –±–∞—Ä–∞–±–∞–Ω–∞
                        if (Math.random() < winChance / 3) { // –®–∞–Ω—Å –Ω–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –¥–ª—è –±–∞—Ä–∞–±–∞–Ω–∞
                            reelValues[reelIndex] = '7Ô∏è‚É£'; // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —à–∞–Ω—Å –Ω–∞ 7
                        } else {
                             reelValues[reelIndex] = slotItems[Math.floor(Math.random() * slotItems.length)];
                        }
                        gameDisplay.innerText = reelValues.join('');
                    }, spinTime[reelIndex]);
                }

                spinSingleReel(0);
                setTimeout(() => spinSingleReel(1), 200); // –ó–∞–ø—É—Å–∫–∞–µ–º –≤—Ç–æ—Ä–æ–π –±–∞—Ä–∞–±–∞–Ω —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π
                setTimeout(() => spinSingleReel(2), 400); // –ó–∞–ø—É—Å–∫–∞–µ–º —Ç—Ä–µ—Ç–∏–π –±–∞—Ä–∞–±–∞–Ω —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π

                setTimeout(() => {
                    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –ø–æ—Å–ª–µ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—Å–µ—Ö –±–∞—Ä–∞–±–∞–Ω–æ–≤
                    if (reelValues[0] === reelValues[1] && reelValues[1] === reelValues[2] && reelValues[0] !== '') {
                        isWin = true;
                        winAmount = (reelValues[0] === '7Ô∏è‚É£') ? 100 : (reelValues[0] === 'üíé' ? 70 : 40);
                    }

                    showResult(isWin, winAmount);
                    if (isWin) updateBalance(winAmount);
                    isGameBusy = false;
                }, spinTime[2] + 200); // –ñ–¥–µ–º, –ø–æ–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –±–∞—Ä–∞–±–∞–Ω –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è
            }
        }
    </script>
</body>
</html>