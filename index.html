<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DICE CLASH</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --glass: rgba(255, 255, 255, 0.08);
            --glass-border: rgba(255, 255, 255, 0.12);
            --accent: #0088cc;
            --bg: #050505;
        }

        body {
            background: var(--bg);
            color: white;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0; padding: 0; height: 100vh; display: flex; flex-direction: column; overflow: hidden;
        }

        /* Top Bar */
        .top-bar { display: flex; justify-content: space-between; align-items: center; padding: 20px; z-index: 10; }
        .user-info { display: flex; align-items: center; gap: 12px; }
        .user-info img { width: 40px; height: 40px; border-radius: 50%; border: 1.5px solid var(--accent); }

        .balance-badge {
            background: var(--glass);
            backdrop-filter: blur(20px);
            padding: 8px 12px 8px 15px;
            border-radius: 25px;
            border: 1px solid var(--glass-border);
            font-weight: 800;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .add-btn {
            background: var(--accent);
            color: white;
            border: none;
            width: 24px; height: 24px;
            border-radius: 50%;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        /* Content */
        .content { flex: 1; overflow-y: auto; padding-bottom: 120px; }
        .page { display: none; flex-direction: column; align-items: center; padding: 20px; animation: fadeIn 0.3s ease; }
        .page.active { display: flex; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Preview Area & Animations */
        .preview-box {
            height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 80px;
            margin-bottom: 20px;
            position: relative; /* –î–ª—è –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —ç–º–æ–¥–∑–∏ */
        }

        /* Dice Animation */
        .dice-anim {
            animation: rollDice 0.7s ease-out forwards;
        }
        @keyframes rollDice {
            0% { transform: translate(0, 0) rotate(0deg); opacity: 0.5; }
            50% { transform: translate(20px, -20px) rotate(180deg); opacity: 1; }
            100% { transform: translate(0, 0) rotate(360deg); opacity: 1; }
        }

        /* Basket Animation */
        .basket-anim {
            animation: shootBasket 1s ease-out forwards;
        }
        @keyframes shootBasket {
            0% { transform: translate(-50px, 50px) scale(0.8); opacity: 0; }
            30% { transform: translate(0, -30px) scale(1.1); opacity: 1; }
            70% { transform: translate(0, 10px); }
            100% { transform: translate(0, 0); }
        }

        /* Football Animation */
        .football-anim {
            animation: kickFootball 1s ease-out forwards;
        }
        @keyframes kickFootball {
            0% { transform: translateX(-50px) translateY(20px) rotate(0deg); opacity: 0.5; }
            50% { transform: translateX(20px) translateY(-20px) rotate(180deg); opacity: 1; }
            100% { transform: translateX(0) translateY(0) rotate(360deg); opacity: 1; }
        }

        .glass-card { background: var(--glass); backdrop-filter: blur(25px); border: 1px solid var(--glass-border); border-radius: 30px; padding: 20px; width: 90%; margin-bottom: 15px; text-align: center; }
        
        /* Modes */
        .mode-selector { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; width: 100%; margin-top: 20px; }
        .mode-card { background: rgba(255,255,255,0.03); border: 1px solid var(--glass-border); border-radius: 20px; padding: 12px 5px; cursor: pointer; transition: 0.3s; }
        .mode-card.active { background: var(--accent); border-color: var(--accent); box-shadow: 0 0 15px rgba(0, 136, 204, 0.4); }
        .mode-card span { display: block; font-size: 22px; }
        .mode-card p { margin: 5px 0 0 0; font-size: 10px; font-weight: bold; opacity: 0.8; }

        .btn-play { background: white; color: black; border: none; padding: 18px; border-radius: 20px; font-size: 18px; font-weight: 800; width: 100%; margin-top: 25px; transition: 0.2s; }
        .btn-play:active { transform: scale(0.96); }

        /* Stats & Widgets */
        .stat-row { display: flex; gap: 10px; width: 100%; margin-top: 10px; }
        .stat-box { background: var(--glass); flex: 1; padding: 15px; border-radius: 20px; border: 1px solid var(--glass-border); }
        .stat-val { display: block; font-size: 22px; font-weight: 800; color: var(--accent); }
        .stat-label { font-size: 10px; opacity: 0.5; text-transform: uppercase; }

        /* Widget Bar */
        .widget-bar { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); width: 85%; background: rgba(20, 20, 20, 0.8); backdrop-filter: blur(25px); border: 1px solid var(--glass-border); border-radius: 35px; display: flex; justify-content: space-around; padding: 12px 0; z-index: 100; }
        .tab-item { color: rgba(255,255,255,0.3); text-align: center; flex: 1; display: flex; flex-direction: column; align-items: center; gap: 4px; }
        .tab-item.active { color: var(--accent); }
        .tab-icon { font-size: 22px; }
    </style>
</head>
<body>

    <div class="top-bar">
        <div class="user-info">
            <img id="user_pic" src="https://via.placeholder.com/40">
            <span id="user_name" style="font-weight: 700;">Player</span>
        </div>
        <div class="balance-badge">
            <span id="balance_val">100</span>
            <span style="color: #ffd700;">üíé</span>
            <button class="add-btn" onclick="tg.showAlert('–ú–∞–≥–∞–∑–∏–Ω –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –≤ —Å–ª–µ–¥—É—é—â–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏!')">+</button>
        </div>
    </div>

    <div class="content">
        <div id="gamba-page" class="page active">
            <div class="preview-box" id="mode-preview">üé≤</div>
            
            <div class="glass-card">
                <h2 id="mode-title" style="margin: 0;">Dice Clash</h2>
                <p style="opacity: 0.5; font-size: 13px;">–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–∞–≤–∫–∞: 10 üíé</p>

                <div class="mode-selector">
                    <div class="mode-card active" onclick="updateMode('dice', 'üé≤', 'Dice Clash', this)">
                        <span>üé≤</span><p>–ö–£–ë</p>
                    </div>
                    <div class="mode-card" onclick="updateMode('basket', 'üèÄ', 'Basket Shot', this)">
                        <span>üèÄ</span><p>–ë–ê–°–ö–ï–¢</p>
                    </div>
                    <div class="mode-card" onclick="updateMode('football', '‚öΩ', 'Goal Kick', this)">
                        <span>‚öΩ</span><p>–§–£–¢–ë–û–õ</p>
                    </div>
                </div>

                <button class="btn-play" onclick="startSearch()">–ò–ì–†–ê–¢–¨</button>
            </div>
        </div>

        <div id="bonus-page" class="page">
            <div class="glass-card" style="text-align: left;">
                <h3>–ó–∞–¥–∞–Ω–∏—è</h3>
                <div style="display: flex; justify-content: space-between; align-items: center; background: rgba(255,255,255,0.05); padding: 15px; border-radius: 20px;">
                    <span>–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∫–∞–Ω–∞–ª</span>
                    <button style="background: var(--accent); border: none; color: white; border-radius: 10px; padding: 8px 15px;" onclick="tg.showAlert('–ü—Ä–æ–≤–µ—Ä–∫–∞...')">+100</button>
                </div>
            </div>
            
            <div class="glass-card" style="text-align: left;">
                <h3>–†–µ—Ñ–µ—Ä–∞–ª—ã</h3>
                <p style="opacity: 0.6; font-size: 14px;">–ü—Ä–∏–≥–ª–∞—à–∞–π –¥—Ä—É–∑–µ–π –∏ –∑–∞–±–∏—Ä–∞–π –ø–æ 50 üíé –∑–∞ –∫–∞–∂–¥–æ–≥–æ!</p>
                <button class="btn-play" style="background: var(--glass); color: white;" onclick="copyLink()">–ü–†–ò–ì–õ–ê–°–ò–¢–¨</button>
            </div>
        </div>

        <div id="profile-page" class="page">
            <div class="glass-card">
                <h3 style="margin-top: 0;">–ú–æ—è –ò–º–ø–µ—Ä–∏—è</h3>
                <div class="stat-row">
                    <div class="stat-box">
                        <span class="stat-val" id="ref-count">0</span>
                        <span class="stat-label">–î—Ä—É–∑–µ–π</span>
                    </div>
                    <div class="stat-box">
                        <span class="stat-val" id="ref-money" style="color: #00ff88;">0</span>
                        <span class="stat-label">–î–æ—Ö–æ–¥</span>
                    </div>
                </div>
            </div>
            <div class="glass-card">
                <h3 style="margin: 0 0 10px 0;">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                <div class="stat-row">
                    <div class="stat-box">
                        <span class="stat-val">0</span>
                        <span class="stat-label">–ü–æ–±–µ–¥</span>
                    </div>
                    <div class="stat-box">
                        <span class="stat-val">0</span>
                        <span class="stat-label">–ò–≥—Ä</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="widget-bar">
        <div class="tab-item active" onclick="switchTab('gamba-page', this)">
            <span class="tab-icon">üïπÔ∏è</span>
        </div>
        <div class="tab-item" onclick="switchTab('bonus-page', this)">
            <span class="tab-icon">üéÅ</span>
        </div>
        <div class="tab-item" onclick="switchTab('profile-page', this)">
            <span class="tab-icon">üë§</span>
        </div>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        let friends = 5; // –ü—Ä–∏–º–µ—Ä
        const reward = 50;

        // Init Data
        document.getElementById("ref-count").innerText = friends;
        document.getElementById("ref-money").innerText = "+" + (friends * reward) + " üíé";
        
        const urlParams = new URLSearchParams(window.location.search);
        document.getElementById("balance_val").innerText = urlParams.get('balance') || "100";

        if (tg.initDataUnsafe && tg.initDataUnsafe.user) {
            tg.expand();
            document.getElementById("user_name").innerText = tg.initDataUnsafe.user.first_name;
            if (tg.initDataUnsafe.user.photo_url) document.getElementById("user_pic").src = tg.initDataUnsafe.user.photo_url;
        }

        function updateMode(mode, icon, title, el) {
            const preview = document.getElementById('mode-preview');
            
            // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏
            preview.className = 'preview-box'; 
            
            setTimeout(() => { // –ó–∞–ø—É—Å–∫–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –ø–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏
                preview.innerText = icon;
                document.getElementById('mode-title').innerText = title;

                // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—É—é –∞–Ω–∏–º–∞—Ü–∏—é
                if (mode === 'dice') {
                    preview.classList.add('dice-anim');
                } else if (mode === 'basket') {
                    preview.classList.add('basket-anim');
                } else if (mode === 'football') {
                    preview.classList.add('football-anim');
                }
            }, 50); // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞, —á—Ç–æ–±—ã –∞–Ω–∏–º–∞—Ü–∏—è —Å–±—Ä–æ—Å–∏–ª–∞—Å—å

            document.querySelectorAll('.mode-card').forEach(m => m.classList.remove('active'));
            el.classList.add('active');
            tg.HapticFeedback.impactOccurred('medium');
        }

        function switchTab(pageId, el) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            document.querySelectorAll('.tab-item').forEach(t => t.classList.remove('active'));
            el.classList.add('active');
            tg.HapticFeedback.impactOccurred('light');
        }

        function startSearch() {
            tg.HapticFeedback.notificationOccurred('success');
            tg.showAlert("–ü–æ–∏—Å–∫ —Å–æ–ø–µ—Ä–Ω–∏–∫–∞ –Ω–∞—á–∞—Ç!");
        }

        function copyLink() {
            tg.showAlert("–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞!");
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.onload = () => {
            updateMode('dice', 'üé≤', 'Dice Clash', document.querySelector('.mode-card.active'));
        };
    </script>
</body>
</html>