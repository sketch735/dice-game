<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root { --glass: rgba(255,255,255,0.08); --accent: #0088cc; --gold: #ffd700; }
        body { 
            background: #000; color: #fff; font-family: -apple-system, system-ui, sans-serif; 
            margin: 0; height: 100vh; overflow: hidden; display: flex; flex-direction: column;
        }
        .header { padding: 20px; display: flex; justify-content: space-between; align-items: center; }
        .content { flex: 1; padding: 0 15px; overflow-y: auto; }
        
        /* –°—Ç–µ–∫–ª—è–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã */
        .glass { 
            background: var(--glass); backdrop-filter: blur(25px); -webkit-backdrop-filter: blur(25px);
            border: 1px solid rgba(255,255,255,0.1); border-radius: 24px; padding: 20px;
        }

        /* –ò–≥—Ä–æ–≤–∞—è —Å—Ü–µ–Ω–∞ */
        .stage { height: 160px; display: flex; align-items: center; justify-content: center; position: relative; }
        .display-emoji { font-size: 70px; transition: 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        
        /* –ê–Ω–∏–º–∞—Ü–∏—è –≤—Ä–∞—â–µ–Ω–∏—è/–ø–æ–¥–±—Ä–æ—Å–∞ */
        .rolling { animation: roll 0.15s infinite linear; }
        @keyframes roll {
            0% { transform: rotate(0deg) scale(1); }
            50% { transform: rotate(180deg) scale(1.2); }
            100% { transform: rotate(360deg) scale(1); }
        }

        /* –°–µ—Ç–∫–∞ –∏–≥—Ä */
        .games-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 15px; }
        .game-card { 
            background: var(--glass); border-radius: 20px; padding: 15px; text-align: center;
            border: 1px solid transparent; transition: all 0.3s ease;
        }
        .game-card.active { border-color: var(--accent); background: rgba(0, 136, 204, 0.15); box-shadow: 0 0 15px rgba(0,136,204,0.3); }
        .game-card:active { transform: scale(0.92); }
        .game-card div { font-size: 32px; margin-bottom: 5px; }

        /* –ü—Ä–æ—Ñ–∏–ª—å */
        .profile-stat { display: flex; justify-content: space-between; margin-bottom: 15px; }
        .xp-container { background: rgba(255,255,255,0.05); height: 10px; border-radius: 5px; overflow: hidden; }
        .xp-fill { background: linear-gradient(90deg, var(--accent), #00d4ff); height: 100%; width: 65%; }

        .btn-main { 
            background: #fff; color: #000; border: none; width: 100%; 
            padding: 18px; border-radius: 20px; font-weight: 800; font-size: 16px; margin: 20px 0;
            box-shadow: 0 10px 20px rgba(0,0,0,0.5);
        }
        .btn-main:active { transform: scale(0.96); opacity: 0.9; }

        /* –ù–∞–≤–∏–≥–∞—Ü–∏—è */
        .nav { 
            position: fixed; bottom: 20px; left: 20px; right: 20px; 
            background: rgba(25,25,25,0.8); backdrop-filter: blur(20px); 
            display: flex; border-radius: 28px; padding: 6px; border: 1px solid rgba(255,255,255,0.05);
        }
        .nav-item { flex: 1; text-align: center; padding: 14px; opacity: 0.3; font-size: 24px; transition: 0.3s; }
        .nav-item.active { opacity: 1; color: var(--accent); transform: translateY(-2px); }
    </style>
</head>
<body>

<div class="header">
    <div id="user_block"><small style="opacity:0.5">–≠–ª–∏—Ç–∞,</small><br><b id="u_name">–ò–≥—Ä–æ–∫</b></div>
    <div class="glass" style="padding: 8px 16px; border-radius: 16px;"><b id="bal" style="color:var(--gold)">1,250</b> üíé</div>
</div>

<div class="content">
    <div id="p-game" class="tab-content">
        <div class="stage">
            <div id="emoji-display" class="display-emoji">üé≤</div>
        </div>
        
        <div class="games-grid">
            <div class="game-card active" onclick="setMode('üé≤', 'DICE')">
                <div>üé≤</div><small>–ö—É–±</small>
            </div>
            <div class="game-card" onclick="setMode('‚öΩ', 'FOOTBALL')">
                <div>‚öΩ</div><small>–§—É—Ç–±–æ–ª</small>
            </div>
            <div class="game-card" onclick="setMode('üèÄ', 'BASKET')">
                <div>üèÄ</div><small>–ë–∞—Å–∫–µ—Ç</small>
            </div>
            <div class="game-card" onclick="setMode('üé∞', 'SLOTS')">
                <div>üé∞</div><small>–°–ª–æ—Ç—ã</small>
            </div>
        </div>
        <button class="btn-main" onclick="play()">–ü–û–ü–´–¢–ê–¢–¨ –£–î–ê–ß–£</button>
    </div>

    <div id="p-prof" class="tab-content" style="display:none">
        <div class="glass">
            <div class="profile-stat">
                <span>–†–∞–Ω–≥: <b>–ó–æ–ª–æ—Ç–∞—è –ª–∏–≥–∞</b></span>
                <span style="color:var(--accent)">#124</span>
            </div>
            <div class="xp-container">
                <div class="xp-fill"></div>
            </div>
            <p style="font-size:12px; opacity:0.5; margin-top:8px">–û–ø—ã—Ç –¥–æ –Ω–æ–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è: 450 XP</p>
        </div>

        <div class="glass" style="margin-top:15px; display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
            <div style="text-align:center">
                <small style="opacity:0.5">–ü–æ–±–µ–¥</small><br><b>342</b>
            </div>
            <div style="text-align:center">
                <small style="opacity:0.5">–í –∏–≥—Ä–µ</small><br><b>12–¥</b>
            </div>
        </div>
    </div>
</div>

<div class="nav">
    <div class="nav-item active" onclick="switchTab('p-game', this)">üéÆ</div>
    <div class="nav-item" onclick="switchTab('p-prof', this)">üë§</div>
</div>

<script>
    let tg = window.Telegram.WebApp;
    let mode = 'DICE';
    let isRolling = false;

    document.getElementById('u_name').innerText = tg.initDataUnsafe.user?.first_name || "–ò–≥—Ä–æ–∫";

    function setMode(m, type) {
        if(isRolling) return;
        mode = type;
        document.getElementById('emoji-display').innerText = m;
        document.querySelectorAll('.game-card').forEach(c => c.classList.remove('active'));
        event.currentTarget.classList.add('active');
        tg.HapticFeedback.selectionChanged();
    }

    function play() {
        if(isRolling) return;
        isRolling = true;
        const display = document.getElementById('emoji-display');
        display.classList.add('rolling');
        tg.HapticFeedback.impactOccurred('heavy');

        // –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (–∞–∑–∞—Ä—Ç)
        setTimeout(() => {
            display.classList.remove('rolling');
            let result = '';
            
            if(mode === 'DICE') {
                const dice = ['1Ô∏è‚É£','2Ô∏è‚É£','3Ô∏è‚É£','4Ô∏è‚É£','5Ô∏è‚É£','6Ô∏è‚É£'];
                result = dice[Math.floor(Math.random()*dice.length)];
            } else if(mode === 'SLOTS') {
                const items = ['üíé','üçí','7Ô∏è‚É£','üçã'];
                result = items[Math.floor(Math.random()*items.length)] + items[Math.floor(Math.random()*items.length)] + items[Math.floor(Math.random()*items.length)];
            } else {
                result = Math.random() > 0.5 ? '‚úÖ –ì–û–õ!' : '‚ùå –ú–ò–ú–û';
            }

            display.innerText = result;
            isRolling = false;
            tg.HapticFeedback.notificationOccurred(result.includes('‚ùå') ? 'error' : 'success');
        }, 1200);
    }

    function switchTab(id, el) {
        document.querySelectorAll('.tab-content').forEach(t => t.style.display = 'none');
        document.getElementById(id).style.display = 'block';
        document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
        el.classList.add('active');
        tg.HapticFeedback.impactOccurred('light');
    }
</script>
</body>
</html>